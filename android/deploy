echo \
  && sudo ANDROID_SDK_ROOT=/usr/lib/android-sdk ./gradlew build \
  && rm -f coolreader.apk \
  && echo signing apk \
  && signapk ~/signapk/certificate.pem ~/signapk/key.pk8 \
       ./app/build/outputs/apk/primary/release/app-primary-arm64-v8a-release-unsigned.apk \
       coolreader.apk \
  && ipmagic sx --rsync -avP coolreader.apk :/home/nemo/android_storage/ \
  && echo "
       pm install -r -d /sdcard/coolreader.apk;
       pm grant org.coolreader android.permission.READ_EXTERNAL_STORAGE;
       pm grant org.coolreader android.permission.WRITE_EXTERNAL_STORAGE;
       pm grant org.coolreader android.permission.READ_PHONE_STATE;
     " | ipmagic sx -s ad shell \
  && alarm -s success \
  || alarm -s failure \
;
